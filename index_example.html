<!-- 홈 화면 -->
<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://code.jquery.com/jquery-latest.min.js"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <!-- font awesome-->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.3/css/all.css"
    integrity="sha384-SZXxX4whJ79/gErwcOYf+zWLeJdY/qpuqC4cAa9rOGUstPomtqpuNWT9wdPEn2fk" crossorigin="anonymous">
  <!-- Google Fonts -->
  <link
    href="https://fonts.googleapis.com/css?family=https://fonts.googleapis.com/css?family=Inconsolata:400,500,600,700|Raleway:400,400i,500,500i,600,600i,700,700i"
    rel="stylesheet">
  <!-- MDB -->
    <link
    href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.css"
    rel="stylesheet"
    />

    <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    rel="stylesheet"
    />
  <title>MANGOSTEEN | TODAY'S HOT TREND</title>
</head>

<body>
  <nav class="navbar">
    <div class="container">
      <a class="mainlogo" href="{{url_for('index')}}"><i class="far fa-lemon"> Mangosteen.</i></a>
    </div>
    <!-- 기본 안내 문구 -->
    <div class="nav-detail">
      Explore world with your own interests!
      <br>
      망고스틴에서 여러분의 관심사를 토대로 제공되는 서비스를 경험해보세요!
    </div>
  </nav>


  <!-- 사회날씨 및 핫 키워드 -->
  <div class="todayInfo">
    <div class="weather">
      <h5>Today's Social Weather</h5>
      <p id="social-weather"><i class="fas fa-sun"></i>맑음</p>
    </div>
    <div class="keyword">
      <h5>Today's Hot Keywords</h5>
      <p id="keyword">
      <ul>
        <button id="keyword1">코로나</button>
        <button id="keyword2">백신</button>
        <button id="keyword3">빠니보틀</button>
        <button id="keyword4">곽튜브</button>
        <button id="keyword5">여행</button>
      </ul>
      </p>
    </div>
    <!--search bar -->
    <div class="search-bar">
      <input type="text" id="search-box" placeholder="키워드 검색">
      <button type="submit" id="submit-btn"><i class="fas fa-search"></i></button>
    </div>
  </div>


  <!-- 동영상 블럭 -->
  <div class="masonry-wrapper">
    <h3>Today's ranking</h3>
    <h5>(be updated every hour!)</h5>
    <div class="masonry">
      {%for img in img_data%}
      {%set img_url= img%}
      <div class="masonry-item">
        <div class="col-sm">
          <span class="badge bg-primary">#{{loop.index}}</span>
        </div>

        <img src="{{img_url}}" type='button' value="{{loop.index}}" data-mdb-toggle="modal" data-mdb-target='#exampleModal' class="masonry-content show">

        <div class="row">
          <div class="col-sm">
            {{title_data[loop.index-1]}}
          </div>
        </div>
      </div>
      {%endfor%}
    </div>

  
  <!--통계 데이터-->

    <div class="modal top fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"  data-mdb-backdrop="true" data-mdb-keyboard="true">
      <div class="modal-dialog modal-xl ">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
            <button type="button" class="btn-close" data-mdb-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">...</div>
        </div>
      </div>
    </div>


    <!-- Script-->
    <script src='https://masonry.desandro.com/masonry.pkgd.js'></script>
    <script src="//unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    

    <script type="text/javascript">
    $(document).ready(function(){
      $('.show').click(function(){
          var value = $(this).val();
          console.log(this)
          
          var postdata = {
              'value':value
          }
          $.ajax({
              type: 'POST',
              url: '{{url_for("ajax")}}',
              data: JSON.stringify(postdata),
              dataType : 'JSON',
              contentType: "application/json",
              success: function(response){
                  //showList(response)
                  console.log('success')
              },
              error: function(request, status, error){
                  alert('ajax 통신 실패')
                  alert(error);
              }
          })
      })
    });
    


      /*
      function showList(data){
          var line=document.getElementById('LineChart').getContext('2d')
          var pie=document.getElementById('PieChart').getContext('2d')
          var LineChart=new Chart(line,{
              type: 'line',
              data: {
                  labels: data.view_result['date'],
                  datasets: [{
                      label: '최근 5시간 조회수 변화',
                      data: data.view_result['view'],
                      fill: false,
                      borderColor: 'rgb(75, 192, 192)',
                      linetension: 0.1
                  }]
              },
              options: {

              }
          });
          var PieChart=new Chart(pie,{
              type:'doughnut',
              data:{
                  labels: ['negative','netural','positive'],
                  datasets:[{
                      data: data.sentiment_result['rate'],
                      fill:false,
                      backgroundColor: ['#E5FBB8','#F5E79D','#FE9898'],
                      hoverOffset:4
                  }]
              },
          })
          $(".modal-title").append(data.view_result['title'])
      }
      */
  </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"></script>

    <!-- ======= Footer ======= -->
    <footer class="footer" role="contentinfo">
      <div class="container">
        <div class="row">
          <div class="col-sm">
            <p class="mb">&copy; Copyright Mangosteen.
              <br>
              All Rights Reserved
            </p>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.js"
    ></script>
</body>

</html>